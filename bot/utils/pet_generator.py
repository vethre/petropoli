import random

PETS_BY_RARITY = {
    "Обычная": [
        ("Собака", "Баланс"),
        ("Кошка", "Дамаг-диллер"),
        ("Хорек", "Саппорт"),
        ("Кролик", "Баланс"),
        ("Морская свинка", "Саппорт"),
        ("Курица", "Саппорт"),
    ],
    "Необычная": [
        ("Лиса", "Дамаг-диллер"),
        ("Енот", "Баланс"),
        ("Утка", "Саппорт"),
        ("Гусь", "Танк"),
        ("Белка", "Дамаг-диллер"),
        ("Волк", "Дамаг-диллер"),
    ],
    "Редкая": [
        ("Сова", "Дамаг-диллер"),
        ("Филин", "Баланс"),
        ("Рысь", "Дамаг-диллер"),
        ("Бобр", "Танк"),
        ("Олень", "Баланс"),
        ("Лань", "Саппорт"),
    ],
    "Очень Редкая": [
        ("Медведь", "Танк"),
        ("Кабан", "Танк"),
        ("Барсук", "Баланс"),
        ("Выдра", "Саппорт"),
        ("Заяц-беляк", "Саппорт"),
        ("Глухарь", "Танк"),
    ],
    "Эпическая": [
        ("Гепард", "Дамаг-диллер"),
        ("Пантера", "Дамаг-диллер"),
        ("Горилла", "Танк"),
        ("Орангутанг", "Саппорт"),
        ("Носорог", "Танк"),
        ("Бегемот", "Танк"),
    ],
    "Легендарная": [
        ("Лев", "Танк"),
        ("Тигр", "Дамаг-диллер"),
        ("Слон", "Танк"),
        ("Жираф", "Саппорт"),
        ("Королевская кобра", "Дамаг-диллер"),
        ("Крокодил", "Танк"),
    ],
    "Мифическая": [
        ("Дракон Комодо", "Танк"),
        ("Гризли", "Танк"),
        ("Бизон", "Танк"),
        ("Анаконда", "Баланс"),
        ("Оцелот", "Дамаг-диллер"),
        ("Фенек", "Саппорт"),
    ],
    "Древняя": [
        ("Мамонт", "Танк"),
        ("Саблезубый тигр", "Дамаг-диллер"),
        ("Птеродактиль", "Дамаг-диллер"),
        ("Мегалодон", "Танк"),
        ("Динозавр", "Баланс"),
        ("Лютоволк", "Дамаг-диллер"),
    ],
    "Божественная": [
        ("Феникс", "Саппорт"),
        ("Единорог", "Саппорт"),
        ("Грифон", "Баланс"),
        ("Кракен", "Танк"),
        ("Цербер", "Дамаг-диллер"),
        ("Химера", "Баланс"),
    ],
    "Абсолютная": [
        ("Йормунганд", "Танк"),
        ("Зевс-Орел", "Дамаг-диллер"),
        ("Аид-Цербер", "Танк"),
        ("Космический Кит", "Баланс"),
        ("Кицунэ", "Саппорт"),
        ("Первобытный Дракон", "Дамаг-диллер"),
    ]
}

RARITY_CHANCES = [
    ("Обычная", 40),
    ("Необычная", 20),
    ("Редкая", 12),
    ("Очень Редкая", 8),
    ("Эпическая", 6),
    ("Легендарная", 4),
    ("Мифическая", 3),
    ("Древняя", 3),
    ("Божественная", 2),
    ("Абсолютная", 2),
]

RARITY_STATS_RANGE = {
    "Обычная": (10, 25),
    "Необычная": (20, 35),
    "Редкая": (30, 45),
    "Очень Редкая": (35, 50),
    "Эпическая": (40, 60),
    "Легендарная":(45, 68),
    "Мифическая":(50, 70),
    "Древняя":(58, 78),
    "Божественная":(68, 82),
    "Абсолютная":(85, 120),
}

RARITY_TOTAL_STAT_MULTIPLIER = {
    "Обычная": 1.0,
    "Необычная": 1.2,
    "Редкая": 1.4,
    "Очень Редкая": 1.6,
    "Эпическая": 1.8,
    "Легендарная": 2.0,
    "Мифическая": 2.2,
    "Древняя": 2.5,
    "Божественная": 2.8,
    "Абсолютная": 3.5, # Absolute rarity gets a significant boost
}

def roll_pet():
    rarities = [r[0] for r in RARITY_CHANCES]
    weights = [r[1] for r in RARITY_CHANCES]
    
    selected_rarity = random.choices(rarities, weights=weights, k=1)[0]

    name, pclass = random.choice(PETS_BY_RARITY[selected_rarity])
    return {
        "name": name,
        "rarity": selected_rarity,
        "class": pclass
    }


